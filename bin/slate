#!/usr/bin/env ruby

require_relative '../lib/slate'
require 'kramdown'
require 'fileutils'

args = ARGV[0]

if args.nil?
  puts "Error: Please enter a file"
  exit
end

filename = File.basename(args, ".*")



# Ruby uses begin-rescue keywords instead of try-catch LMAO.... WHYYY
begin
  content = File.read(args)
  dir = File.dirname(args)

  FileUtils.cp("style.css", dir)

  final_html = Slate.convert(content, filename)

  File.write("#{filename}.html", final_html)

  puts "Saved #{filename}.html"
rescue Errno::ENOENT
    puts "No such file: #{args}"
rescue => e
    puts "Unexpected error occured: #{e.message}"
end
